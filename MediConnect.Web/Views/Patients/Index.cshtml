@model IEnumerable<MediConnect.Web.Models.Patient>
@{
    ViewData["Title"] = "Patients";
    string FormatDob(DateTime? d) => d.HasValue ? d.Value.ToString("yyyy-MM-dd") : "—";
}

<div class="card" style="max-width:1100px;margin:auto">
  <div class="section-head">
    <div class="section-title">Patients</div>
    <div>
      <a class="btn btn-success" asp-action="Create">+ New Patient</a>
    </div>
  </div>

  @if (Model == null || !Model.Any())
  {
    <div class="text-muted">No patients yet. Click <strong>+ New Patient</strong> to add your first record.</div>
  }
  else
  {
    <table class="table mt-2">
      <thead>
        <tr>
          <th style="width:28%">Name</th>
          <th style="width:18%">DOB</th>
          <th style="width:28%">Email</th>
          <th style="width:16%">Phone</th>
          <th style="width:10%"></th>
        </tr>
      </thead>
      <tbody>
      @foreach (var p in Model)
      {
        <tr>
          <td>@(string.IsNullOrWhiteSpace(p.FullName) ? "—" : p.FullName)</td>
          <td>@FormatDob(p.DateOfBirth)</td>
          <td>@(string.IsNullOrWhiteSpace(p.Email) ? "—" : p.Email)</td>
          <td>@(string.IsNullOrWhiteSpace(p.Phone) ? "—" : p.Phone)</td>
          <td class="right" style="display:flex;gap:8px;justify-content:flex-end">
            <a class="btn btn-ghost" asp-action="Details" asp-route-id="@p.Id">View</a>
            <a class="btn btn-primary" asp-action="Edit" asp-route-id="@p.Id">Edit</a>
            <a class="btn btn-danger" asp-action="Delete" asp-route-id="@p.Id">Delete</a>
          </td>
        </tr>
      }
      </tbody>
    </table>
  }
</div>
